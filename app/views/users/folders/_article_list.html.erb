<div class="col-12 avoid-element-coverage">
  <% if @articles.present? %>
  <% hover = @articles.present? ? "table-hover" : "" %>
    <table class="table articles-table <%= hover %> table-scroll">
      <thead>
        <tr>
          <th class="px-5"><%= Article.human_attribute_name(:title) %></th>
          <th class="px-5"><%= Article.human_attribute_name(:sub_title) %></th>
          <th class="px-5"><%= Article.human_attribute_name(:user) %></th>
          <th class="px-5"><%= Article.human_attribute_name(:created_at) %></th>
          <th></th>
        </tr>
      </thead>
        <tbody>
          <% if hover.present? %>
            <% @articles.each_with_index do |article, index| %>
              <tr>
                <td class="link-td" id="article-title" draggable="true" onclick='window.location="<%= users_article_path(id: article.id) %>"'>
                  <div class="d-flex align-items-center">
                    <%= article.title %>
                  <% unless current_admin.present? %>
                    <% if article.likes.present? %>
                      <% if current_user.article_already_liked?(article.id) %>
                        <i class="fa-solid fa-heart ml-4 mr-2"></i><%= article.likes.count %>
                      <% else %>
                        <i class="fa-regular fa-heart ml-4 mr-2"></i><%= article.likes.count %>
                      <% end %>
                    <% else %>
                      <% if article.likes.present? %>
                        <i class="fa-solid fa-heart ml-4 mr-2"></i><%= article.likes.count %>
                      <% end %>
                    <% end %>
                    <% if article.article_comments.present? %>
                      <i class="fa-regular fa-comment fa-sm ms-auto">&nbsp<%= article.article_comments.count %></i>
                    <% end %>
                  <% end %>
                  </div>
                </td>
                <td class="link-td" id="article-subtitle" onclick='window.location="<%= users_article_path(id: article.id) %>"'><%= article.sub_title %></td>
                  <% if article.admin.present? %>
                    <td class="link-td" id="article-authur" onclick='window.location="<%= admins_article_path(id: article.id) %>"'><%= article.admin.name %></td>
                  <% else %>
                    <td class="link-td" id="article-authur" onclick='window.location="<%= users_article_path(id: article.id) %>"'><%= article.user.name %></td>
                  <% end %>
                <td class="link-td" id="article-createdat" onclick='window.location="<%= users_article_path(id: article.id) %>"'><%= l(article.created_at, format: :long) %></td>
                  <td>
                    <button class="btn" data-bs-toggle="dropdown" style="width: 66.5px" >︙</button>
                    <ul class="dropdown-menu">
                      <% if current_user.present? && current_admin.nil? %>
                        <% if article.user_id == current_user.id %>
                          <li><%= link_to '閲覧', users_article_path(id: article.id, page: params[:page]), class: "nav-link" %></li>
                          <li><%= link_to '編集', edit_users_article_path(id: article.id, page: params[:page]), class: "nav-link" %></li>
                          <li><%= link_to '削除', users_article_path(id: article.id, page: params[:page]), method: :delete, data: {confirm: "選択した記事を削除します。"}, class: "nav-link" %></li>
                        <% else %>
                          <li><%= link_to '閲覧', users_article_path(id: article.id, page: params[:page]), class: "nav-link" %></li>
                        <% end %>
                      <% end %>
                      <% if current_admin.present? %>
                       <li><%= link_to '閲覧', users_article_path(id: article.id, page: params[:page]), class: "nav-link" %></li>
                      <% end %>
                    </ul>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <%= render 'users/shared/table_without_record' %>
            <% end %>
          </tbody>
        </table>
        <div class="article-paginate">
          <%= paginate @articles, theme: 'bootstrap-5' %>
        </div>
      </div>
<% else %>
  <div class="col-12">
    <p class="fs-4">フォルダに追加した記事がありません。</p>
  </div>
<% end %>
